(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{140:function(e,t){e.exports=function(e,t){return[Math.round(e[0]/t)*t,Math.round(e[1]/t)*t]}},170:function(e,t,a){"use strict";function n(e,t,a,n,r,i,o){o=o||{};var s=t[e];return Object.keys(s).reduce(function(s,c){var l=function(e,t,a,n,r,i,o,s){var c=a[e][t],l=a[t][e],p=[],u=[],d=s.edgeDataSeed;for(s.edgeDataReduceFn&&(d=s.edgeDataReduceFn(d,i[t][e]));!n[t];){var m=a[t];if(!m)break;var h=Object.keys(m).filter(function(t){return t!==e})[0];if(c+=m[h],o){if(l+=a[h][t],u.indexOf(t)>=0){n[t]=a[t];break}u.push(t)}s.edgeDataReduceFn&&(d=s.edgeDataReduceFn(d,i[t][h])),p.push(r[t]),e=t,t=h}return{vertex:t,weight:c,reverseWeight:l,coordinates:p,reducedEdge:d}}(e,c,t,a,n,r,i,o),p=l.weight,u=l.reverseWeight;if(l.vertex!==e&&((!s.edges[l.vertex]||s.edges[l.vertex]>p)&&(s.edges[l.vertex]=p,s.coordinates[l.vertex]=[n[e]].concat(l.coordinates),s.reducedEdges[l.vertex]=l.reducedEdge),i&&!isNaN(u)&&(!s.incomingEdges[l.vertex]||s.incomingEdges[l.vertex]>u))){s.incomingEdges[l.vertex]=u;var d=[n[e]].concat(l.coordinates);d.reverse(),s.incomingCoordinates[l.vertex]=d}return s},{edges:{},incomingEdges:{},coordinates:{},incomingCoordinates:{},reducedEdges:{}})}e.exports={compactNode:n,compactGraph:function(e,t,a,r){var i=(r=r||{}).progress,o=Object.keys(e).reduce(function(t,a,n,r){var o,s=e[a],c=Object.keys(s),l=c.length;if(1===l){var p=e[c[0]];o=!p[a]}else o=2===l&&c.filter(function(t){return e[t][a]}).length===l;return o||(t[a]=s),n%1e3===0&&i&&i("compact:ends",n,r.length),t},{});return Object.keys(o).reduce(function(s,c,l,p){var u=n(c,e,o,t,a,!1,r);return s.graph[c]=u.edges,s.coordinates[c]=u.coordinates,r.edgeDataReduceFn&&(s.reducedEdges[c]=u.reducedEdges),l%1e3===0&&i&&i("compact:nodes",l,p.length),s},{graph:{},coordinates:{},reducedEdges:{}})}}},294:function(e,t,a){var n=a(373);e.exports=function(e,t,a){var r={};r[t]=0;for(var i=new n([[0,[t],t]],function(e,t){return e[0]-t[0]});i.length;){var o=i.pop(),s=o[0],c=o[2];if(c===a)return o.slice(0,2);var l=e[c];Object.keys(l).forEach(function(e){var t=s+l[e];if(!(e in r)||t<r[e]){r[e]=t;var a=[t,o[1].concat([e]),e];i.push(a)}})}return null}},295:function(e,t,a){"use strict";var n=a(374),r=a(140);function i(e){return"LineString"===e.geometry.type}e.exports=function(e,t){var a=(t=t||{}).keyFn||function(e){return e.join(",")},o=t.precision||1e-5,s=function(e,t){var a=[];"FeatureCollection"===e.type&&(a=a.concat(e.features.filter(t)));return{type:"FeatureCollection",features:a}}(e,i),c=n(s).features.reduce(function(e,n,i,s){var c=r(n.geometry.coordinates,o);return e[a(c)]=n.geometry.coordinates,i%1e3===0&&t.progress&&t.progress("topo:vertices",i,s.length),e},{}),l=function e(t,a,n){return"FeatureCollection"===t.type?t.features.reduce(function(t,n){return e(n,a,t)},n):a(n,t)}(s,function(e,n,i,s){return n.geometry.coordinates.forEach(function(t,i,s){if(i>0){var c=a(r(s[i-1],o)),l=a(r(t,o));e.push([c,l,n.properties])}}),i%1e3===0&&t.progress&&t.progress("topo:edges",i,s.length),e},[]);return{vertices:c,edges:l}}},344:function(e,t,a){e.exports=a(607)},351:function(e,t,a){e.exports=a.p+"static/media/start.2b3a6e15.svg"},352:function(e,t,a){e.exports=a.p+"static/media/finish.b336a83d.svg"},353:function(e,t,a){e.exports=a.p+"static/media/business.e87899ae.svg"},354:function(e,t,a){e.exports=a.p+"static/media/bicycle.971f6a4f.svg"},355:function(e,t,a){e.exports=a.p+"static/media/hiking.eb071ea3.svg"},356:function(e,t,a){e.exports=a.p+"static/media/tent.051bcc3a.svg"},357:function(e,t,a){e.exports=a.p+"static/media/hut.4687401e.svg"},358:function(e,t,a){e.exports=a.p+"static/media/town.5c095e44.svg"},359:function(e,t,a){e.exports=a.p+"static/media/water.1006b328.svg"},360:function(e,t,a){e.exports=a.p+"static/media/attraction.cb8356bf.svg"},361:function(e,t,a){e.exports=a.p+"static/media/vehicle.10d97375.svg"},362:function(e,t,a){e.exports=a.p+"static/media/selected.34e4a388.svg"},363:function(e,t,a){e.exports=a.p+"static/media/cafe.73792b87.svg"},364:function(e,t,a){e.exports=a.p+"static/media/food.96c00f56.svg"},365:function(e,t,a){e.exports=a.p+"static/media/lighthouse.ea5d0879.svg"},366:function(e,t,a){e.exports=a.p+"static/media/picnic.7476be12.svg"},367:function(e,t,a){e.exports=a.p+"static/media/pub.43ece9e6.svg"},368:function(e,t,a){e.exports=a.p+"static/media/warning.184b1553.svg"},369:function(e,t,a){e.exports=a.p+"static/media/taxi.2965450c.svg"},370:function(e,t,a){e.exports=a.p+"static/media/rider.01857493.svg"},371:function(e,t,a){e.exports=a.p+"static/media/hiker.e0bca492.svg"},599:function(e,t,a){},600:function(e,t,a){},601:function(e,t,a){},602:function(e,t,a){},603:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(11),o=a.n(i),s=a(44),c=a(142),l=a(195),p=a(20),u=a(12),d=a.n(u),m=[{id:"taxi",name:"Taxi Service"},{id:"campsite",name:"Campsite"},{id:"hut",name:"Hut/Shelter"},{id:"town",name:"Town"},{id:"water",name:"Water"},{id:"attraction",name:"Tourist Attraction / Point of Interest"},{id:"vehicle",name:"Vehicle Access Point"},{id:"cafe",name:"Cafe"},{id:"pub",name:"Pub"},{id:"restaurant",name:"Restaurant"},{id:"lighthouse",name:"Lighthouse"},{id:"picnic_area",name:"Picnic Area"},{id:"warning",name:"Warning"}],h=new d.a.Icon({iconUrl:a(351),iconSize:new d.a.Point(30,35),className:null}),f=new d.a.Icon({iconUrl:a(352),iconSize:new d.a.Point(30,35),className:null}),g=new d.a.Icon({iconUrl:a(353),iconSize:new d.a.Point(25,30),className:null}),y=new d.a.Icon({iconUrl:a(354),iconSize:new d.a.Point(25,30),className:null}),E=new d.a.Icon({iconUrl:a(355),iconSize:new d.a.Point(25,30),className:null}),b=new d.a.Icon({iconUrl:a(356),iconSize:new d.a.Point(25,30),className:null}),k=new d.a.Icon({iconUrl:a(357),iconSize:new d.a.Point(25,30),className:null}),v=new d.a.Icon({iconUrl:a(358),iconSize:new d.a.Point(25,30),className:null}),_=new d.a.Icon({iconUrl:a(359),iconSize:new d.a.Point(25,30),className:null}),w=new d.a.Icon({iconUrl:a(360),iconSize:new d.a.Point(25,30),className:null}),O=new d.a.Icon({iconUrl:a(361),iconSize:new d.a.Point(25,30),className:null}),M=new d.a.Icon({iconUrl:a(362),iconSize:new d.a.Point(25,30),className:null}),C=new d.a.Icon({iconUrl:a(363),iconSize:new d.a.Point(25,30),className:null}),S=new d.a.Icon({iconUrl:a(364),iconSize:new d.a.Point(25,30),className:null}),j=new d.a.Icon({iconUrl:a(365),iconSize:new d.a.Point(25,30),className:null}),P=new d.a.Icon({iconUrl:a(366),iconSize:new d.a.Point(25,30),className:null}),T=new d.a.Icon({iconUrl:a(367),iconSize:new d.a.Point(25,30),className:null}),N=new d.a.Icon({iconUrl:a(368),iconSize:new d.a.Point(25,30),className:null}),D=new d.a.Icon({iconUrl:a(369),iconSize:new d.a.Point(25,30),className:null}),x=new d.a.Icon({iconUrl:a(370),iconSize:new d.a.Point(25,30),className:null}),L=new d.a.Icon({iconUrl:a(371),iconSize:new d.a.Point(25,30),className:null});var A=["restaurant","pub","cafe"],I=["taxi"],F=a(29),U=a.n(F),R=[{key:"darkmatter",pretty:"Dark Matter - (dark theme)"},{key:"basic",pretty:"Basic"},{key:"positron",pretty:"Positron - (greyscale)"},{key:"topo",pretty:"Topographical"}],z="",B="FETCH_PRODUCTS_BEGIN",K="FETCH_PRODUCTS_SUCCESS",G="FETCH_MARKERS_SUCCESS",H="FETCH_PRODUCTS_FAILURE",V="CALC_DISTANCE",q="CALC_ELEVATION",W="STORE_CUSTOM_TRACK",X="CHANGE_ZOOM_LEVEL",Z="CHANGE_FOCUS_POINT",J="FIND_TRAIL_MARKERS",Q="FILTER_TRAIL_MARKERS",Y="CHANGE_TERRAIN",$="SET_START_POINT",ee="SET_END_POINT",te="STORE_FOCUS_MARKER",ae="SET_CUSTOM_DISTANCE_MARKER",ne="ADD_MAP_MARKER_START",re="ADD_MAP_MARKER_END",ie="WIPE_MARKERS_AND_PATH",oe="WIPE_MARKERS",se="ALLOW_CUSTOM_PATH",ce="CHANGE_SIDEBAR_DATA",le="SET_OPEN_MENUS",pe="OPEN_DISTANCE_TAB",ue="FETCH_MAPS_SUCCESS",de="WIPE_START_MARKER",me="WIPE_END_MARKER",he="FETCH_USERS_SUCCESS",fe="FETCH_USERS_FAILURE",ge="TOGGLE_LIVE_TRAIL_USERS",ye="SHOW_MARKER_ADD_MODAL",Ee="LAT_LNG_FROM_CONTEXT",be="SHOULD_SHOW_CONTEXT_MENU",ke="FETCH_ELEVATION_LOADING",ve="CHANGE_ELEVATION_DATA";function _e(){return function(e){e(Me()),fetch(z+"/api/map_preview").then(Oe).then(function(e){return e.json()}).then(function(t){e(je(t))}).catch(function(t){console.error(t,"Many Maps Info"),e(Pe(t))})}}function we(e){return function(t){t(Me()),fetch(z+"/api/spotuserswithlocation?map_alias="+e).then(Oe).then(function(e){return e.json()}).then(function(e){var t=[];return e.map(function(e){if(e.locations[0]){Date.now(),Date.parse(e.locations[0].recorded_timestamp);var a=e.locations[0].recorded_timestamp.split(/[-T.]/),n=new Date(a.slice(0,3).join("/")+" "+a[3]),r=new Date(n);t.push({marker_id:e.id,marker_type:e.user_type,marker_lat:e.locations[0].latitude,marker_lng:e.locations[0].longitude,default_image:e.user_picture,marker_blurb:e.user_blurb,marker_info:[{title:"Latest GPS Location Timestamp",value:r.toString()}],marker_title:e.user_name,gps_locations:e.locations})}}),t}).then(function(e){t(Te(e))}).catch(function(e){console.error(e,"Trail Users"),t(Pe(e))})}}function Oe(e){if(!e.ok)throw Error(e.statusText);return e}var Me=function(){return{type:B}},Ce=function(e){return{type:K,payload:{initMapInfo:e}}},Se=function(e){return{type:G,payload:{markers:e}}},je=function(e){return{type:ue,payload:{maps:e}}},Pe=function(e){return{type:H,payload:{error:e}}},Te=function(e){return{type:he,payload:{users:e}}},Ne=function(e){return{type:X,payload:e}},De=function(e){return{type:Z,payload:e}},xe=function(e){return{type:W,payload:e}},Le=function(e){return{type:J,payload:e}},Ae=function(e){return{type:Q,payload:e}},Ie=function(e){return{type:Y,payload:e}},Fe=function(e){return{type:$,payload:e}},Ue=function(e){return{type:ee,payload:e}},Re=function(e){return{type:te,payload:e}},ze=function(e){return{type:ae,payload:e}},Be=function(){return{type:ie}},Ke=function(){return{type:oe}},Ge=function(){return{type:de}},He=function(){return{type:me}},Ve=function(e){return{type:se,payload:e}},qe=function(e,t){return{type:ce,payload:{blurb:e,image:t}}},We=function(e){return{type:le,payload:e}},Xe=function(){return{type:pe}},Ze=function(e){return{type:ge,payload:e}},Je=function(e){return{type:ye,payload:e}},Qe=function(e){return{type:be,payload:e}},Ye=function(e){return{type:ke,payload:e}},$e=function(e){return{type:ve,payload:e}},et={data:[],loadingTrack:!0,loadingMarkers:!0,error:null,poiMarkers:[],distancePoint:{},mapMarkerTypes:[],distance:0,elevation:[],customDistance:[],customPath:{},terrain:"topo",zoom:10,center:0,filters:[],startPoint:{},endPoint:{},focusMarker:{},customDistanceMarker:[],mapMarkerStart:null,mapMarkerEnd:null,allowCustomPath:!1,sideBarImage:null,sideBarBlurb:null,openKeys:["menu","sub6"],allMaps:[],showLiveTrailUsers:!0,liveTrailUsers:[],focusTrailUser:null,shouldShowModal:!1,latLngFromContext:{lat:0,lng:0},shouldShowContextMenuStatus:!1,fetchElevationLoading:!0,elevationData:0};var tt=a(292),at=a(22),nt=a(23),rt=a(25),it=a(24),ot=a(26),st=a(619),ct=a(631),lt=a(630),pt=a(54),ut=a.n(pt),dt=(a(337),a(43)),mt=a(293),ht=a.n(mt),ft=a(294),gt=a.n(ft),yt=a(295),Et=a.n(yt),bt=a(170),kt=a.n(bt),vt=a(140),_t=a.n(vt),wt=a(231),Ot=a.n(wt);function Mt(e,t){if(t=t||{},e.compactedVertices||(e=function(e,t){var a,n=(t=t||{}).weightFn||function(e,t){return ut()(Ot()(e),Ot()(t))};"FeatureCollection"===e.type?a=Et()(e,t):e.edges&&(a=e),e=a.edges.reduce(function(e,r,i,o){var s=r[0],c=r[1],l=r[2],p=n(a.vertices[s],a.vertices[c],l),u=function(a){e.vertices[a]||(e.vertices[a]={},t.edgeDataReduceFn&&(e.edgeData[a]={}))},d=function(a,n,r){e.vertices[a][n]=r,t.edgeDataReduceFn&&(e.edgeData[a][n]=t.edgeDataReduceFn(t.edgeDataSeed,l))};return p&&(u(s),u(c),p instanceof Object?(p.forward&&d(s,c,p.forward),p.backward&&d(c,s,p.backward)):(d(s,c,p),d(c,s,p))),i%1e3===0&&t.progress&&t.progress("edgeweights",i,o.length),e},{edgeData:{},vertices:{}});var r=kt.a.compactGraph(e.vertices,a.vertices,e.edgeData,t);return{vertices:e.vertices,edgeData:e.edgeData,sourceVertices:a.vertices,compactedVertices:r.graph,compactedCoordinates:r.coordinates,compactedEdges:t.edgeDataReduceFn?r.reducedEdges:null}}(e,t)),this._graph=e,this._keyFn=t.keyFn||function(e){return e.join(",")},this._precision=t.precision||1e-5,this._options=t,0===Object.keys(this._graph.compactedVertices).filter(function(e){return"edgeData"!==e}).length)throw new Error("Compacted graph contains no forks (topology has no intersections).")}Mt.prototype={findPath:function(e,t){var a=this._keyFn(_t()(e.geometry.coordinates,this._precision)),n=this._keyFn(_t()(t.geometry.coordinates,this._precision));if(!this._graph.vertices[a]||!this._graph.vertices[n])return null;this._createPhantom(a),this._createPhantom(n);var r=gt()(this._graph.compactedVertices,a,n);if(r){var i=r[0];return{path:(r=r[1]).reduce(function(e,t,a,n){return a>0&&(e=e.concat(this._graph.compactedCoordinates[n[a-1]][t])),e}.bind(this),[]).concat([this._graph.sourceVertices[n]]),weight:i,edgeDatas:this._graph.compactedEdges?r.reduce(function(e,t,a,n){return a>0&&e.push({reducedEdge:this._graph.compactedEdges[n[a-1]][t]}),e}.bind(this),[]):void 0}}return null},serialize:function(){return this._graph},_createPhantom:function(e){if(this._graph.compactedVertices[e])return null;var t=kt.a.compactNode(e,this._graph.vertices,this._graph.compactedVertices,this._graph.sourceVertices,this._graph.edgeData,!0,this._options);return this._graph.compactedVertices[e]=t.edges,this._graph.compactedCoordinates[e]=t.coordinates,this._graph.compactedEdges&&(this._graph.compactedEdges[e]=t.reducedEdges),Object.keys(t.incomingEdges).forEach(function(a){this._graph.compactedVertices[a][e]=t.incomingEdges[a],this._graph.compactedCoordinates[a][e]=t.incomingCoordinates[a],this._graph.compactedEdges&&(this._graph.compactedEdges[a][e]=t.reducedEdges[a])}.bind(this)),e},_removePhantom:function(e){e&&(Object.keys(this._graph.compactedVertices[e]).forEach(function(t){delete this._graph.compactedVertices[t][e]}.bind(this)),Object.keys(this._graph.compactedCoordinates[e]).forEach(function(t){delete this._graph.compactedCoordinates[t][e]}.bind(this)),this._graph.compactedEdges&&Object.keys(this._graph.compactedEdges[e]).forEach(function(t){delete this._graph.compactedEdges[t][e]}.bind(this)),delete this._graph.compactedVertices[e],delete this._graph.compactedCoordinates[e],this._graph.compactedEdges&&delete this._graph.compactedEdges[e])}};var Ct=a(296),St=a.n(Ct),jt=a(232),Pt=a.n(jt),Tt=a(297),Nt=a.n(Tt),Dt=a(227),xt=a(226);var Lt=function(e,t,a){if(a=a||{},!Object(dt.isObject)(a))throw new Error("options is invalid");var n=e.geometry?e.geometry.type:e.type;if("LineString"!==n&&"MultiLineString"!==n)throw new Error("lines must be LineString or MultiLineString");var r=Object(dt.point)([1/0,1/0],{dist:1/0}),i=0;return Object(Dt.flattenEach)(e,function(e){for(var n=Object(xt.getCoords)(e),o=0;o<n.length-1;o++){var s=Object(dt.point)(n[o]);s.properties.dist=ut()(t,s,a);var c=Object(dt.point)(n[o+1]);c.properties.dist=ut()(t,c,a);var l=ut()(s,c,a),p=Math.max(s.properties.dist,c.properties.dist),u=St()(s,c),d=Pt()(t,p,u+90,a),m=Pt()(t,p,u-90,a),h=Nt()(Object(dt.lineString)([d.geometry.coordinates,m.geometry.coordinates]),Object(dt.lineString)([s.geometry.coordinates,c.geometry.coordinates])),f=null;h.features.length>0&&((f=h.features[0]).properties.dist=ut()(t,f,a),f.properties.location=i+ut()(s,f,a)),s.properties.dist<r.properties.dist&&((r=s).properties.index=n[o],r.properties.location=i),c.properties.dist<r.properties.dist&&((r=c).properties.index=n[o+1],r.properties.location=i+l),f&&f.properties.dist<r.properties.dist&&((r=f).properties.index=n[o]),i+=l}}),r};function At(e,t,a){var n=ht()(e).features[0].geometry.coordinates,r=Object(dt.multiLineString)(n);return{closestStart:Lt(r,Object(dt.point)([t.marker_lng,t.marker_lat])),closestFinish:Lt(r,Object(dt.point)([a.marker_lng,a.marker_lat]))}}function It(e,t,a){var n=At(e,t,a),r=n.closestStart,i=n.closestFinish;if(r=Object(dt.point)(r.properties.index),i=Object(dt.point)(i.properties.index),U.a.isEqual(r,i))return{path:null,distance:0,chartData:null,elevationGain:0,elevationLoss:0};var o=new Mt(e,{precision:1e-5}).findPath(r,i),s=function(e){var t,a=0,n=[],r=0,i=0;if(e.length>1)for(t=0;t<e.length;t++)if(e[t-1]){a+=ut()(e[t-1],e[t]);var o=0;t>0&&t%11===0&&(o=Math.abs(e[t][2]-e[t-11][2]))>5&&(e[t-11][2]<e[t][2]?r+=o:i+=o),n.push({elevation:e[t][2],distance:a,coords:[e[t][1],e[t][0]]})}else a=0,n.push({elevation:e[t][2],distance:a,coords:[e[t][1],e[t][0]]});return{distance:a,chartData:n,elevationGain:r,elevationLoss:i}}(o.path);return{path:Object(dt.lineString)(o.path),distance:s.distance,chartData:s.chartData,elevationGain:s.elevationGain,elevationLoss:s.elevationLoss}}a(390);var Ft=a(616),Ut=a(615),Rt=a(632),zt=a(628),Bt=a(609),Kt=a(233),Gt=a(298),Ht=a(299),Vt=a(610),qt=a(629),Wt=a(300),Xt=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).markerClick=function(e){var t=U.a.cloneDeep(a.props.marker);a.props.openKeys.includes("distanceTab")||a.props.openDistanceTab(),"startPoint"===e?(a.props.wipeMarkerStart(),a.props.setStartPoint(t)):(a.props.wipeMarkerEnd(),a.props.setEndPoint(t))},a.switchIcon=function(e){return a.props.startPoint===e||a.props.endPoint===e?M:function(e){switch(e){case"start":return h;case"finish":return f;case"business":return g;case"bicycle":return y;case"campsite":return b;case"hut":return k;case"town":return v;case"water":return _;case"attraction":return w;case"vehicle":return O;case"cafe":return C;case"restaurant":return S;case"lighthouse":return j;case"picnic_area":return P;case"pub":return T;case"warning":return N;case"taxi":return D;case"cyclist":return x;case"hiker":return L;default:return w}}(e.marker_type)},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this,t=this.props.marker,a=this.switchIcon(t),n=t.marker_info,i=t.marker_title;return r.a.createElement(Bt.a,{key:t.id,position:[t.marker_lat,t.marker_lng],icon:a,onClick:function(){e.props.onClick(t)}},r.a.createElement(qt.a,null,r.a.createElement("div",{className:"titleDiv"},r.a.createElement(Wt.Textfit,{style:{width:120,height:30},className:"title-parent"},r.a.createElement("h1",null," ",i," ")),r.a.createElement("div",{className:"titleSpan"},r.a.createElement("a",null,r.a.createElement(Kt.a,{icon:Gt.a,className:"startFlag",onClick:function(){e.markerClick("startPoint")}})),r.a.createElement("a",null,r.a.createElement(Kt.a,{icon:Ht.a,className:"startFlag",onClick:function(){e.markerClick("endPoint")}})))),r.a.createElement(Vt.a,{style:{marginTop:0,marginBottom:5}}),r.a.createElement("div",{className:"popupText"},n.map(function(e){return r.a.createElement("div",null,r.a.createElement("b",null," ",e.title,": ")," ",e.value)}))))}}]),t}(n.Component),Zt=Object(s.b)(function(e){return{startPoint:e.startPoint,endPoint:e.endPoint,openKeys:e.openKeys}},function(e){return{setStartPoint:function(t){e(Fe(t))},setEndPoint:function(t){e(Ue(t))},openDistanceTab:function(t){e(Xe())},wipeMarkerStart:function(){e(Ge())},wipeMarkerEnd:function(){e(He())}}})(Xt),Jt=a(617),Qt=a(18),Yt=a(77),$t=a(64),ea=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,elevation:0},a.enableMarkerAdd=function(e){e.stopPropagation(),a.props.showMarkerAddModal(!0)},a.onClick=function(){a.props.shouldShowContextMenu(!1)},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.lat,n=t.lng,i=t.x,o=t.y,s=t.loading,c=t.elevationData;return r.a.createElement("div",{className:"context-menu",style:{left:i,top:o}},r.a.createElement(Jt.a,{title:"Point Info",bordered:!1,extra:r.a.createElement("span",null,r.a.createElement("a",{onClick:this.onClick},r.a.createElement(Qt.a,{type:"close"})))},r.a.createElement("p",null,r.a.createElement("b",null," Lat: ")," ",parseFloat(a).toFixed(5)),r.a.createElement("p",null,r.a.createElement("b",null," Lng: ")," ",parseFloat(n).toFixed(5)),r.a.createElement("p",null,r.a.createElement("b",null,"Elevation: "),s?r.a.createElement(Qt.a,{type:"loading"}):c+"m"),r.a.createElement(Yt.a,{className:"marker-add",onClick:function(t){return e.enableMarkerAdd(t)}},"Add Marker Here")))}}]),t}(n.Component),ta=Object($t.a)(function(e){return{lat:e.latLngFromContext.lat,lng:e.latLngFromContext.lng,loading:e.fetchElevationLoading,elevationData:e.elevationData}},function(e){return{showMarkerAddModal:function(t){e(Je(t))},shouldShowContextMenu:function(t){e(Qe(t))}}})(ea),aa=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(i)))).state={context:!1,x:0,y:0},a.checkMarkers=function(e){"button"!==e.originalEvent.target.type&&a.props.shouldShowContextMenu(!1);var t=U.a.isEmpty(a.props.startPoint),n=U.a.isEmpty(a.props.endPoint);a.props.allowCustomPath&&(t?(e.startEnd="start",a.addCustomMarker(e)):n?(e.startEnd="end",a.addCustomMarker(e)):(e.startEnd="start",a.props.wipeMarkersAndPath(),a.addCustomMarker(e)))},a.draggableMarker=function(e){var t=U.a.isEmpty(a.props.startPoint),n=U.a.isEmpty(a.props.endPoint),r={marker_title:"Custom Map Point",marker_lat:e.target._latlng.lat,marker_lng:e.target._latlng.lng};"start"===e.startEnd?(a.props.addMapMarkerStart(r),a.props.setStartPoint(r)):(a.props.addMapMarkerEnd(r),a.props.setEndPoint(r)),t||n||a.updatePath()},a.updatePath=function(){var e=It(a.props.data.map_track,a.props.startPoint,a.props.endPoint);a.props.storeCustomTrack(e)},a.checkForCustomPath=function(){if(Object.keys(a.props.customPath).length&&a.props.customPath.path)return r.a.createElement(Ft.a,{key:a.props.customPath.elevationChartData.length,data:a.props.customPath.path,interactive:!1,color:"red"})},a.shouldShowMarker=function(e){var t=a.props.startPoint,n=a.props.endPoint,r=a.props.focusMarker;if(!U.a.isEmpty(t)&&t.marker_id===e.marker_id)return!0;if(!U.a.isEmpty(n)&&n.marker_id===e.marker_id)return!0;if(!U.a.isEmpty(r)){var i=I.includes(e.marker_type),o=A.includes(e.marker_type);if(r.marker_id===e.marker_id&&a.props.filters.includes(r.marker_type)||i&&a.props.filters.includes("trail businesses")||o&&a.props.filters.includes("drinks & dining"))return!0}return!1},a.onClickMarker=function(e){a.props.storeFocusMarker(e),a.props.changeSideBarData(e.marker_blurb,e.default_image)},a.filterMarkers=function(){var e=[];return a.props.poiMarkers.map(function(t){var n=I.includes(t.marker_type),i=A.includes(t.marker_type);(a.props.filters.includes(t.marker_type)||n&&a.props.filters.includes("trail businesses")||i&&a.props.filters.includes("drinks & dining")||a.shouldShowMarker(t))&&e.push(r.a.createElement(Zt,{marker:t,onClick:a.onClickMarker}))}),e},a.rightClick=function(e){a.setState({x:e.containerPoint.x,y:e.containerPoint.y}),a.props.setLatLngFromContextClick({lat:e.latlng.lat,lng:e.latlng.lng}),a.props.fetchElevation(e.latlng.lat,e.latlng.lng),a.props.shouldShowContextMenu(!0)},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"addCustomMarker",value:function(e){var t={marker_title:"Custom Map Point",marker_lat:e.latlng.lat,marker_lng:e.latlng.lng};this.props.openKeys.includes("distanceTab")||this.props.openDistanceTab(),"start"===e.startEnd?(this.props.addMapMarkerStart(t),this.props.setStartPoint(t)):(this.props.addMapMarkerEnd(t),this.props.setEndPoint(t))}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.center,i=t.zoom,o=t.terrain,s=t.customDistanceMarker,c=t.mapMarkerStart,l=t.mapMarkerEnd,p=t.liveTrailUsers,u=t.showLiveTrailUsers,d=t.shouldShowContextMenuStatus,m="https://api.maptiler.com/maps/"+o+"/{z}/{x}/{y}.png?key=7qrAZ6R0EFPZMiyEp2m4";return r.a.createElement(Ut.a,{center:n,zoom:i,className:"map",zoomControl:!1,onClick:this.checkMarkers,onContextMenu:this.rightClick},r.a.createElement(Rt.a,{position:"bottomright"}),r.a.createElement(zt.a,{attribution:'<a href="https://www.maptiler.com/license/maps/" target="_blank">\xa9 MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">\xa9 OpenStreetMap contributors</a>',url:m}),r.a.createElement(Ft.a,{interactive:!1,data:a.map_track}),this.checkForCustomPath(),this.filterMarkers().map(function(e){return e}),u?p.map(function(t){return r.a.createElement(Zt,{marker:t,onClick:e.onClickMarker})}):null,d?r.a.createElement(ta,{x:this.state.x,y:this.state.y}):null,c?r.a.createElement(Bt.a,{key:c.distance,position:[c.marker_lat,c.marker_lng],icon:h,draggable:!0,onDragEnd:function(t){return t.startEnd="start",e.draggableMarker(t)},className:"map-marker-custom"}):null,l?r.a.createElement(Bt.a,{key:l.distance,position:[l.marker_lat,l.marker_lng],icon:f,draggable:!0,onDragEnd:function(t){return t.startEnd="end",e.draggableMarker(t)},className:"map-marker-custom"}):null,s.length?r.a.createElement(Bt.a,{key:1,position:s,icon:"cycling"===this.props.data.map_type.toLowerCase()?y:E}):null)}}]),t}(n.Component),na=Object(s.b)(function(e){return{data:e.data,poiMarkers:e.poiMarkers,customDistance:e.customDistance,customPath:e.customPath,center:e.center,zoom:e.zoom,filters:e.filters,terrain:e.terrain,startPoint:e.startPoint,endPoint:e.endPoint,focusMarker:e.focusMarker,customDistanceMarker:e.customDistanceMarker,mapMarkerStart:e.mapMarkerStart,mapMarkerEnd:e.mapMarkerEnd,allowCustomPath:e.allowCustomPath,openKeys:e.openKeys,showLiveTrailUsers:e.showLiveTrailUsers,liveTrailUsers:e.liveTrailUsers,shouldShowContextMenuStatus:e.shouldShowContextMenuStatus,shouldShowModal:e.shouldShowModal}},function(e){return{addMapMarkerStart:function(t){e({type:ne,payload:t})},addMapMarkerEnd:function(t){e({type:re,payload:t})},storeDistance:function(t){e({type:V,payload:t})},calcElevation:function(t){e({type:q,payload:t})},storeCustomTrack:function(t){e(xe(t))},wipeMarkersAndPath:function(){e(Be())},openDistanceTab:function(){e(Xe())},changeSideBarData:function(t,a){e(qe(t,a))},storeFocusMarker:function(t){e(Re(t))},setStartPoint:function(t){e(Fe(t))},setEndPoint:function(t){e(Ue(t))},setLatLngFromContextClick:function(t){e({type:Ee,payload:t})},shouldShowContextMenu:function(t){e(Qe(t))},fetchElevation:function(t,a){e(function(e,t){return function(a){a(Ye(!0)),fetch("https://dev.virtualearth.net/REST/v1/Elevation/List?points=".concat(e,",").concat(t,"&key=Ahj6mcvlG04XGZyebUbWKYsWBAXBF18DeXctHOmwCrcxj-C4TvQKGCBmPVfnq0Z2")).then(Oe).then(function(e){return e.json()}).then(function(e){var t=e.resourceSets[0].resources[0].elevations[0];a($e(t)),a(Ye(!1))}).catch(function(e){console.error(e,"Get elevations error")})}}(t,a))}}})(aa),ra=a(99),ia=a.n(ra),oa=a(193),sa=a(336),ca=a(620),la=a(614),pa=a(621),ua=a(125),da=a(624),ma=a(618),ha=a(627),fa=sa.a.TextArea,ga=ca.a.Option,ya=la.a.create({name:"form_in_modal"})(function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,i=e.form,o=e.lat,s=e.lng,c=i.getFieldDecorator;return r.a.createElement(pa.a,{visible:t,title:"Add New Marker",okText:"Submit for Approval",onCancel:a,onOk:n},r.a.createElement(la.a,{layout:"vertical"},r.a.createElement(la.a.Item,{label:r.a.createElement("span",null,"Marker name",r.a.createElement(ua.a,{title:"A short name for the marker to appear on the map. Do not include any information about distance or elevation."},r.a.createElement(Qt.a,{className:"helper-icon",type:"question-circle"})))},c("marker_title",{rules:[{required:!0,message:"Please input the name of the marker"}]})(r.a.createElement(sa.a,null))),r.a.createElement("span",null,r.a.createElement(la.a.Item,{style:{display:"inline-block"},label:"Latitude"},c("lat",{initialValue:o.toFixed(5)})(r.a.createElement(da.a,{style:{width:200},disabled:!0}))),r.a.createElement(la.a.Item,{style:{display:"inline-block",paddingLeft:10},label:"Longitude"},c("lng",{initialValue:s.toFixed(5)})(r.a.createElement(da.a,{style:{width:200},disabled:!0})))),r.a.createElement(la.a.Item,{label:r.a.createElement("span",null,"Type of marker",r.a.createElement(ua.a,{title:"Choose from one of the following options. Different icons appear for each type"},r.a.createElement(Qt.a,{className:"helper-icon",type:"question-circle"}))),hasFeedback:!0},c("marker_type",{rules:[{required:!0,message:"Please select the type of marker"}]})(r.a.createElement(ca.a,{showSearch:!0,dropdownClassName:"marker-type-dropdown",placeholder:"Type of marker"},m.map(function(e){return r.a.createElement(ga,{value:e.id}," ",e.name," ")})))),r.a.createElement(la.a.Item,{label:r.a.createElement("span",null,"Popup Information",r.a.createElement(ua.a,{title:"This information appears above the marker when it's clicked. Do not include any information about distance or elevation."},r.a.createElement(Qt.a,{className:"helper-icon",type:"question-circle"})))},c("marker_info",{rules:[{required:!0,message:"Marker popup information is required"}]})(r.a.createElement(fa,{rows:2}))),r.a.createElement(la.a.Item,{label:r.a.createElement("span",null,"Sidebar Description",r.a.createElement(ua.a,{title:"This information appears on the collapsible sidebar. Do not include any information about distance or elevation."},r.a.createElement(Qt.a,{className:"helper-icon",type:"question-circle"})))},c("marker_blurb",{rules:[{required:!0,message:"A short sidebar blurb is required"}]})(r.a.createElement(fa,{rows:3}))),r.a.createElement(la.a.Item,{label:r.a.createElement("span",null,"Image",r.a.createElement(ua.a,{title:"An image is not required but is handy!"},r.a.createElement(Qt.a,{className:"helper-icon",type:"question-circle"})))},r.a.createElement("div",{className:"dropbox"},c("default_image",{valuePropName:"fileList",getValueFromEvent:function(e){return Array.isArray(e)?e:e&&e.fileList}})(r.a.createElement(ma.a,Object.assign({},this.props.imageProps,{name:"file",action:"https://api.cloudinary.com/v1_1/dqlvslhyi/image/upload"}),r.a.createElement(Yt.a,null,r.a.createElement(ua.a,{title:"prompt text"},r.a.createElement(Qt.a,{className:"helper-icon",type:"upload"})," Click to upload"))))))))}}]),t}(r.a.Component)),Ea=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!0},a.postNewMarker=function(){var e=Object(oa.a)(ia.a.mark(function e(t){var a;return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)},e.next=3,fetch(z+"/api/submit_marker",a).then(function(e){return 201===e.status});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.handleCancel=function(){a.props.dispatch(Je(!1)),a.props.dispatch(Qe(!1))},a.handleCreate=Object(oa.a)(ia.a.mark(function e(){var t;return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.props.dispatch(Qe(!1)),(t=a.formRef.props.form).validateFields(function(){var e=Object(oa.a)(ia.a.mark(function e(n,r){return ia.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=11;break}return r.marker_lat=parseFloat(r.lat),r.marker_lng=parseFloat(r.lng),r.map=a.props.data.id,r.marker_info=[{title:"Information",value:r.marker_info}],r.default_image&&(r.default_image=r.default_image[0].response.url),e.next=8,a.postNewMarker(r);case 8:e.sent?(ha.a.success("Successful submission. Marker will be added pending moderator approval"),a.props.dispatch(Je(!1))):ha.a.error("Unsuccessful submission"),t.resetFields();case 11:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}},e)})),a.saveFormRef=function(e){a.formRef=e},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e={name:"file",multiple:!1,data:function(e){return e.timestamp=Date.now()/1e3|0,e.upload_preset="arqsmfbb",e.api_key="553857945975548",e},headers:{"X-Requested-With":"XMLHttpRequest"},onChange:function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?ha.a.success("".concat(e.file.name," file uploaded successfully.")):"error"===t&&ha.a.error("".concat(e.file.name," file upload failed."))}};return r.a.createElement("div",null,r.a.createElement(ya,{wrappedComponentRef:this.saveFormRef,visible:this.state.visible,onCancel:this.handleCancel,onCreate:this.handleCreate,lat:this.props.lat,lng:this.props.lng,imageProps:e}))}}]),t}(n.Component),ba=Object($t.a)(function(e){return{shouldShowModal:e.shouldShowModal,lat:e.latLngFromContext.lat,lng:e.latLngFromContext.lng,data:e.data}})(Ea),ka=a(611),va=a(622),_a=a(328),wa=a(59),Oa=a(196),Ma=a(329),Ca=a(338),Sa=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).drawMarker=function(e){e.activePayload&&a.props.dispatch(ze(e.activePayload[0].payload.coords))},a.wipeMarker=function(){a.props.dispatch(ze([]))},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ka.a,{width:"100%",height:"100%"},r.a.createElement(va.a,{data:this.props.customPath.elevationChartData,margin:{top:5,right:20,left:5,bottom:12},onMouseMove:function(t){return e.drawMarker(t)},onMouseLeave:this.wipeMarker},r.a.createElement(_a.a,{dataKey:function(e){return e.distance.toFixed(1)}},r.a.createElement(wa.a,{value:"Distance (km)",offset:-6,position:"insideBottom",className:"x-axis"})),r.a.createElement(Oa.a,{labelFormatter:function(e){return"distance: "+e+"km"},formatter:function(e){return e+"m"}}),"/>",r.a.createElement(Ma.a,{allowDecimals:!1,dataKey:"elevation"},r.a.createElement(wa.a,{value:"Elevation (meters)",angle:-90,position:"insideLeft",offset:10,dy:60,style:{color:"red"},className:"y-axis"})),r.a.createElement(Ca.a,{dot:!1,type:"monotone",dataKey:"elevation",stroke:"#8884d8"})))}}]),t}(n.Component),ja=Object(s.b)(function(e){return{customPath:e.customPath}})(Sa),Pa=a(625),Ta=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).onMapSelect=function(e){window.location.href="/maps/"+e[1]},a.buildChildren=function(e){var t=[];return a.props.allMaps.map(function(a){a[e]&&t.push({value:a.map_alias,label:a.map_name})}),t},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this,t=[{value:"cycling",label:"Cycling",children:this.buildChildren("cycling")},{value:"walking",label:"Bushwalking",children:this.buildChildren("walking")}];return r.a.createElement(Pa.a,{options:t,className:"map-select",onChange:this.onMapSelect,placeholder:this.props.data.map_name?this.props.data.map_name+" | "+this.props.data.map_type.charAt(0).toUpperCase()+this.props.data.map_type.slice(1):"Please Select",size:"large",getPopupContainer:function(){return document.getElementsByClassName(e.props.parentNode)[0]}})}}]),t}(n.Component),Na=Object($t.a)(function(e){return{data:e.data,allMaps:e.allMaps}})(Ta),Da=a(339),xa=a(626),La=a(612),Aa=ca.a.Option,Ia=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSource,a=e.onSelect,n=e.type,i=e.value,o=e.inputDirty,s=e.markerType,c=t.map(function(e){return r.a.createElement(Aa,{key:e.marker_id},e.marker_title)});return r.a.createElement("div",null,r.a.createElement(ca.a,{showSearch:!0,mode:this.props.mode,style:{width:200,marginBottom:10},onInputKeyDown:o,placeholder:this.props.placeHolder,filterOption:function(e,t){return-1!==t.props.children.toUpperCase().indexOf(e.toUpperCase())},onSelect:function(e){a(e,n,s)},value:i?i.marker_title:null},c))}}]),t}(n.Component),Fa=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.dataSource,a=e.dataSelect,n=e.buttonDisabled,i=e.submitDistance,o=e.startPoint,s=e.endPoint,c=e.clearPath,l=e.customPath;return r.a.createElement("div",{style:{marginLeft:48}},r.a.createElement("div",null,r.a.createElement(Ia,{placeHolder:"Start point",onSelect:a,type:"start",dataSource:t,value:o,className:"distance-calculator",markerType:"distance"}),r.a.createElement(Ia,{placeHolder:"End point",onSelect:a,type:"end",dataSource:t,value:s,markerType:"distance"}),this.props.customDistance,r.a.createElement(Yt.a,{disabled:n,icon:"calculator",type:"primary",htmlType:"submit",className:"login-form-button",onClick:i},"Calculate"),l.path?r.a.createElement(Yt.a,{icon:"delete",type:"default",htmlType:"submit",className:"clear-path",onClick:c},"Clear"):null),r.a.createElement(Vt.a,{className:"distance-divider"}),r.a.createElement(Jt.a,{bordered:!1,style:{width:250}},r.a.createElement("span",null,"Custom Path Creation",r.a.createElement(ua.a,{title:"Click on the map to define a custom start and end point "},r.a.createElement(Qt.a,{style:{paddingLeft:4,fontSize:12},type:"question-circle"})),r.a.createElement(La.a,{size:"small",style:{marginLeft:5},checked:this.props.allowCustomPath,onChange:this.props.toggleCustomPath}))),r.a.createElement(Vt.a,{style:{marginTop:0},className:"distance-divider"}),l.path?r.a.createElement(Jt.a,{bordered:!1,style:{width:250}},r.a.createElement("p",null,r.a.createElement("b",null," Distance: "),l.distance.toFixed(2),"km"),r.a.createElement("p",null,r.a.createElement("b",null,"Elevation Gain: "),Math.round(l.elevationGain),"m"),r.a.createElement("p",null,r.a.createElement("b",null,"Elevation Loss: ")," ",Math.round(l.elevationLoss),"m")):null)}}]),t}(r.a.Component),Ua=Object(s.b)(function(e){return{startPoint:e.startPoint,endPoint:e.endPoint,customPath:e.customPath,allowCustomPath:e.allowCustomPath}})(Fa),Ra=a(623).a.Group,za=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props.mapMarkerTypes;return r.a.createElement(Ra,{style:this.props.style,options:e,onChange:this.props.filterMarkers,defaultValue:this.props.currentFilters})}}]),t}(n.Component),Ba=ca.a.Option,Ka=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.terrain,a=e.terrainSwitch;return r.a.createElement("div",null,r.a.createElement(ca.a,{style:this.props.style,onChange:a,defaultValue:t,placeholder:t.pretty},R.map(function(e){return r.a.createElement(Ba,{key:e.key}," ",e.pretty," ")})))}}]),t}(n.Component),Ga=xa.a.SubMenu,Ha=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).dataSelect=function(e,t,n){var r;"distance"===n&&(r=a.props.poiMarkers.find(function(t){return t.marker_id===parseInt(e)})),"liveTrailUser"===n&&(r=a.props.liveTrailUsers.find(function(t){return t.marker_id===parseInt(e)})),"locate"===t?(a.props.dispatch(Ne(13)),a.props.dispatch(De([r.marker_lat,r.marker_lng])),a.props.dispatch(Re(r))):"start"===t?(a.props.dispatch(Ge()),a.props.dispatch(Fe(r))):(a.props.dispatch(He()),a.props.dispatch(Ue(r)))},a.submitDistance=function(e){e.preventDefault();var t=a.calculateInfo();a.props.dispatch(xe(t))},a.clearPath=function(e){e.preventDefault(),a.props.dispatch(Be())},a.calculateInfo=function(){var e=[{start:{marker_lat:a.props.startPoint.marker_lat,marker_lng:a.props.startPoint.marker_lng}},{finish:{marker_lat:a.props.endPoint.marker_lat,marker_lng:a.props.endPoint.marker_lng}}];return It(a.props.data.map_track,e[0].start,e[1].finish)},a.filterMarkers=function(e){a.props.dispatch(Ae(e))},a.terrainSwitch=function(e){a.props.dispatch(Ie(e))},a.toggleCustomPath=function(e){a.props.dispatch(Ke()),"Custom Map Point"===a.props.startPoint.marker_title&&a.props.dispatch(Fe({})),"Custom Map Point"===a.props.endPoint.marker_title&&a.props.dispatch(Ue({})),a.props.dispatch(Ve(e))},a.toggleShowLiveTrailUsers=function(e){a.props.dispatch(Ze(e))},a.isButtonDisabled=function(){var e=U.a.isEmpty(a.props.startPoint),t=U.a.isEmpty(a.props.endPoint);return!(!e&&!t)},a.handleMenuOpen=function(e){a.props.dispatch(We(e))},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,a=e.poiMarkers,n=e.mapMarkerTypes,i=e.sideBarImage,o=e.sideBarBlurb,s=e.terrain,c=e.focusMarker,l=e.filters,p=e.openKeys,u=e.liveTrailUsers;return r.a.createElement(xa.a,{className:"overlayMenu",onOpenChange:this.handleMenuOpen,style:{width:300,opacity:.9},defaultOpenKeys:["menu","sub6"],openKeys:p,mode:"inline"},r.a.createElement(Ga,{key:"menu",className:"title",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{style:{fontSize:"1.4em"},type:"setting",theme:"outlined",className:"icons-large"}),r.a.createElement("span",{id:"map-tool-heading"}," Map Tools"))},r.a.createElement(Vt.a,{style:{margin:0}}),r.a.createElement(Ga,{style:{paddingTop:40},key:"sub1",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"search",theme:"outlined",className:"sub-icon"}),r.a.createElement("span",{className:"sub-heading"},"Locate Point on Map"))},r.a.createElement("div",{style:{marginLeft:48}},r.a.createElement(Ia,{placeHolder:"Point on map",dataSource:a,type:"locate",onSelect:this.dataSelect,value:c,markerType:"distance"}))),r.a.createElement(Ga,{key:"distanceTab",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"calculator",theme:"outlined",className:"sub-icon"}),r.a.createElement("span",{className:"sub-heading"},"Distance and Elevation"))},r.a.createElement(Ua,{dataSource:a,dataSelect:this.dataSelect,buttonDisabled:this.isButtonDisabled(),submitDistance:this.submitDistance,clearPath:this.clearPath,toggleCustomPath:this.toggleCustomPath})),r.a.createElement(Ga,{key:"sub3",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"select",theme:"outlined",className:"sub-icon"}),r.a.createElement("span",{className:"sub-heading"}," Filter Visible Markers"))},r.a.createElement(za,{mapMarkerTypes:n,filterMarkers:this.filterMarkers,currentFilters:l,style:{marginLeft:48,width:200}})),r.a.createElement(Ga,{key:"sub4",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"user",theme:"outlined",className:"sub-icon"}),r.a.createElement("span",{className:"sub-heading"}," Live Trail Users"))},r.a.createElement("div",{style:{marginLeft:48}},r.a.createElement(Jt.a,{className:"filter-trail-users",bordered:!1,style:{width:250}},r.a.createElement("span",null,"Show all live trail users",r.a.createElement(ua.a,{title:"Find users with a registered SPOT or Garmin GPS device"},r.a.createElement(Qt.a,{style:{paddingLeft:4,fontSize:12},type:"question-circle"})),r.a.createElement(La.a,{size:"small",style:{marginLeft:5},checked:this.props.showLiveTrailUsers,onChange:this.toggleShowLiveTrailUsers}))),r.a.createElement(Ia,{placeHolder:"Find Trail User",dataSource:u,type:"locate",onSelect:this.dataSelect,value:U.a.has(c,"gps_locations")?c:null,markerType:"liveTrailUser"}),r.a.createElement(Yt.a,{href:"https://forms.gle/ajMvSzBzQg83XE5F7",target:"_blank"},"Link a GPS Tracker"))),r.a.createElement(Ga,{key:"sub5",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"picture",theme:"outlined",className:"sub-icon"}),r.a.createElement("span",{className:"sub-heading"},"Change Map Terrain"))},r.a.createElement(Ka,{terrain:s,terrainSwitch:this.terrainSwitch,style:{marginLeft:48,width:200}})),r.a.createElement(Ga,{key:"sub6",title:r.a.createElement("span",null,r.a.createElement(Qt.a,{type:"info-circle"}),r.a.createElement("span",{className:"sub-heading"},"Map & Marker Information"))},r.a.createElement(Jt.a,{bordered:!1,className:"info-card"},U.a.isEmpty(i)||""===i||null==i?null:r.a.createElement("span",null,r.a.createElement("img",{className:"map-blurb-img",src:i})),r.a.createElement(Vt.a,{className:"map-info-divider"}),r.a.createElement("p",{style:{marginRight:20}},r.a.createElement("b",null," Information: "),U.a.isEmpty(c)?o:c.marker_blurb),r.a.createElement("p",null,r.a.createElement(Vt.a,{className:"map-info-divider"}),r.a.createElement("div",null,!U.a.isEmpty(t.map_stats)&&U.a.isEmpty(c)?t.map_stats.map(function(e){return r.a.createElement("div",null,r.a.createElement("b",null,e.key)," : ",e.value)}):null))))))}}]),t}(r.a.Component),Va=Object(s.b)(function(e){return{data:e.data,poiMarkers:e.poiMarkers,mapMarkerTypes:e.mapMarkerTypes,customPath:e.customPath,terrain:e.terrain,startPoint:e.startPoint,endPoint:e.endPoint,focusMarker:e.focusMarker,filters:e.filters,sideBarImage:e.sideBarImage,sideBarBlurb:e.sideBarBlurb,openKeys:e.openKeys,showLiveTrailUsers:e.showLiveTrailUsers,liveTrailUsers:e.liveTrailUsers,focusTrailUser:e.focusTrailUser}})(Ha),qa=a(613),Wa=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(i)))).content=r.a.createElement("div",{className:"credits"},r.a.createElement("p",null,"Site Built By ",r.a.createElement("a",{href:"https://murrayw123.github.io"}," Murray Watts ")),r.a.createElement("br",null),r.a.createElement("p",null,"Found a bug? Want to tell me the site sucks? Got a trail that you think should be added? Get in touch"," ",r.a.createElement("a",{href:"https://murrayw123.github.io/contact.html"}," here ")),r.a.createElement("br",null),r.a.createElement("p",{className:"attribute-info"},"Icons made by Icon Pond, Smashicons and Freepik from www.flaticon.com is licensed by CC 3.0 BY")),a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"info-icon"},r.a.createElement(qa.a,{content:this.content,title:"Credits and Information",placement:"topRight",trigger:"click"},r.a.createElement(Qt.a,{type:"info-circle",theme:"filled"})))}}]),t}(n.Component),Xa=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).state={width:"40%",height:125,showElevation:!0},a.elevationChartStatus=function(e){a.setState({showElevation:e})},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=window.location.pathname.substring(6);this.props.dispatch((e=a,function(t){t(Me()),fetch(z+"/api/maps/"+e).then(Oe).then(function(e){return e.json()}).then(function(e){var a=F.cloneDeep(e),n=[];return a.default_filters.forEach(function(e){return n.push(e.type)}),a.filters=n,t(Ne(a.zoom_level)),t(qe(a.map_blurb,a.default_image)),t(Ce(a)),a}).catch(function(e){console.error(e,"MapInfo"),t(Pe(e))})})),this.props.dispatch(function(e){return function(t){t(Me()),fetch(z+"/api/markers?map_alias="+e).then(Oe).then(function(e){return e.json()}).then(function(e){return e.map(function(e){return{marker_id:e.id,marker_type:e.marker_type,marker_lat:e.marker_lat,marker_lng:e.marker_lng,marker_info:e.marker_info,marker_title:e.marker_title,marker_blurb:e.marker_blurb,default_image:e.default_image}})}).then(function(e){var a=[];e.forEach(function(e){A.includes(e.marker_type)&&!a.includes("drinks & dining")?a.push("drinks & dining"):I.includes(e.marker_type)&&!a.includes("trail businesses")?a.push("trail businesses"):a.includes(e.marker_type)||I.includes(e.marker_type)||A.includes(e.marker_type)||a.push(e.marker_type)}),t(Le(a)),t(Se(e))}).catch(function(e){console.error(e,"Markers"),t(Pe(e))})}}(a)),this.props.dispatch(_e()),this.props.dispatch(we(a)),this.interval=setInterval(function(){return t.props.dispatch(we(a))},2e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this,t=this.props,a=t.loadingTrack,n=t.loadingMarkers,i=t.customPath,o=t.shouldShowModal,s=this.state.showElevation;return a||n?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"map"},r.a.createElement(Na,{parentNode:"map"}),r.a.createElement(na,null),o?r.a.createElement(ba,null):null,r.a.createElement(Va,null),!U.a.isEmpty(i)&&!0===s&&i.distance>0?r.a.createElement(Da.a,{className:"elevation-chart",size:{width:this.state.width,height:this.state.height},onResize:function(t,a,n,r,i){e.setState(Object(p.a)({width:n.style.width,height:n.style.height},i))}},r.a.createElement(ja,null),r.a.createElement(Qt.a,{className:"minimise-chart",type:"down-circle",onClick:function(){e.elevationChartStatus(!1)}})):!U.a.isEmpty(i)&&i.distance>0?r.a.createElement(Yt.a,{className:"show-elevation",type:"primary",size:"small",onClick:function(){e.elevationChartStatus(!0)}},r.a.createElement("span",null,"Show Elevation",r.a.createElement(Qt.a,{className:"minimise-chart",type:"up-circle"}))):null,r.a.createElement(Wa,null))}}]),t}(n.Component),Za=Object(s.b)(function(e){return{data:e.data,loadingTrack:e.loadingTrack,loadingMarkers:e.loadingMarkers,filters:e.filters,poiMarkers:e.poiMarkers,customPath:e.customPath,elevationChartData:e.elevationChartData,shouldShowModal:e.shouldShowModal}})(Xa),Ja=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return r.a.createElement("h3",null,"Page Not Found")}}]),t}(n.Component),Qa=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(_e())}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"map-switcher-block"},r.a.createElement("h1",null," Trail Maps "),r.a.createElement("div",{className:"map-switcher-div"},r.a.createElement(Na,{placeholder:"Select a Map",parentNode:"map-switcher-block"})),r.a.createElement("div",{className:"disclaimer"},r.a.createElement("p",{className:"title"},"Interactive Bushwalking and Bikepacking maps. View distance, elevation, towns and campsites + more!"),r.a.createElement("p",null,r.a.createElement("b",null," Disclaimer:")," Trailmaps is not intended for navigation purposes and should be used for route planning only. Trailmaps relies on third party track files which may contain errors. No responsibility is accepted for personal injury or property damage from your reliance on any of the information contained on this site."))))}}]),t}(n.Component),Ya=Object($t.a)()(Qa),$a=function(e){function t(){var e,a;Object(at.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(rt.a)(this,(e=Object(it.a)(t)).call.apply(e,[this].concat(r)))).onMapSelect=function(){window.location.href="/maps/mundabiddi"},a}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return r.a.createElement(ct.a,null,r.a.createElement(lt.a,{exact:!0,path:"/",component:Ya}),r.a.createElement(lt.a,{exact:!0,path:"/mundabiddi",component:this.onMapSelect}),r.a.createElement(lt.a,{path:"/maps/",component:Za}),r.a.createElement(lt.a,{component:Ja}))}}]),t}(n.Component),en=function(e){function t(){return Object(at.a)(this,t),Object(rt.a)(this,Object(it.a)(t).apply(this,arguments))}return Object(ot.a)(t,e),Object(nt.a)(t,[{key:"render",value:function(){return r.a.createElement(st.a,null,r.a.createElement($a,null))}}]),t}(n.Component),tn=(a(598),a(599),a(600),a(601),a(602),a(603),a(604),a(605),a(606),Object(c.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return Object(p.a)({},e,{loading:!0,error:null});case K:return Object(p.a)({},e,{loadingTrack:!1,data:t.payload.initMapInfo,center:[t.payload.initMapInfo.startpointlat,t.payload.initMapInfo.startpointlng],filters:t.payload.initMapInfo.filters});case G:return Object(p.a)({},e,{loadingMarkers:!1,poiMarkers:t.payload.markers});case ue:return Object(p.a)({},e,{allMaps:t.payload.maps});case he:return Object(p.a)({},e,{loadingMarkers:!1,liveTrailUsers:t.payload.users});case fe:return Object(p.a)({},e,{error:t.payload.error,liveTrailUsers:[]});case H:return Object(p.a)({},e,{loading:!1,error:t.payload.error,data:[]});case ne:return Object(p.a)({},e,{mapMarkerStart:t.payload});case re:return Object(p.a)({},e,{mapMarkerEnd:t.payload});case V:return Object(p.a)({},e,{customDistance:[].concat(Object(l.a)(e.customDistance),[t.payload])});case q:return Object(p.a)({},e,{mapMarkers:[].concat(Object(l.a)(e.mapMarkers),[t.payload])});case W:return Object(p.a)({},e,{customPath:{path:t.payload.path,distance:t.payload.distance,elevationGain:t.payload.elevationGain,elevationLoss:t.payload.elevationLoss,elevationChartData:t.payload.chartData}});case X:return Object(p.a)({},e,{zoom:t.payload});case Z:return Object(p.a)({},e,{center:t.payload});case J:return Object(p.a)({},e,{mapMarkerTypes:t.payload});case Q:return Object(p.a)({},e,{filters:t.payload});case Y:return Object(p.a)({},e,{terrain:t.payload});case $:return Object(p.a)({},e,{startPoint:t.payload});case ee:return Object(p.a)({},e,{endPoint:t.payload});case te:return Object(p.a)({},e,{focusMarker:t.payload});case ae:return Object(p.a)({},e,{customDistanceMarker:t.payload});case ie:return Object(p.a)({},e,{mapMarkerStart:null,mapMarkerEnd:null,customPath:{},customDistance:[],startPoint:{},endPoint:{}});case oe:return Object(p.a)({},e,{mapMarkerStart:null,mapMarkerEnd:null});case de:return Object(p.a)({},e,{mapMarkerStart:null});case me:return Object(p.a)({},e,{mapMarkerEnd:null});case se:return Object(p.a)({},e,{allowCustomPath:t.payload});case ce:return Object(p.a)({},e,{sideBarImage:t.payload.image,sideBarBlurb:t.payload.blurb});case le:return Object(p.a)({},e,{openKeys:t.payload});case pe:return Object(p.a)({},e,{openKeys:[].concat(Object(l.a)(e.openKeys),["distanceTab"])});default:return e;case ge:return Object(p.a)({},e,{showLiveTrailUsers:t.payload});case ye:return Object(p.a)({},e,{shouldShowModal:t.payload});case Ee:return Object(p.a)({},e,{latLngFromContext:t.payload});case be:return Object(p.a)({},e,{shouldShowContextMenuStatus:t.payload});case ke:return Object(p.a)({},e,{fetchElevationLoading:t.payload});case ve:return Object(p.a)({},e,{elevationData:t.payload})}},Object(c.a)(tt.a)));o.a.render(r.a.createElement(s.a,{store:tn},r.a.createElement(en,null)),document.getElementById("root"))}},[[344,1,2]]]);
//# sourceMappingURL=main.af50253c.chunk.js.map